<!--<vg-location-edit-select vg-edit="true"></vg-location-edit-select>-->
<!--<vg-location-edit-star vg-edit="false"></vg-location-edit-star>-->
<!--<vg-location-edit-end></vg-location-edit-end>-->
<!--
TODO WIP: AddLocation
TODO WIP: AddProduct
DONE: SetLocationName
DONE: SetLocationType
DONE: SetLocationDescription
TODO WIP: SetLocationCoordinates
DONE: SetLocationWebsite
TODO WIP: SetLocationProductListComplete
TODO WIP: SetLocationExistence
TODO WIP: SetProductName
TODO WIP: SetProductAvailability
TODO WIP: HowWellDoYouKnowThisLocation
DONE: RateLocationQuality
TODO WIP: TagLocation
TODO WIP: RateProduct
TODO WIP: HaveYouBeenHereRecently
TODO WIP: GiveFeedback
TODO WIP: MentionVegan
TODO WIP: BuyProduct
-->

<vg-location-edit-overlay
 ng-if="$ctrl.editTask"
 vg-is-questionnaire="false"
 vg-edit-task="$ctrl.editTask"
 vg-location="$ctrl.location"
 vg-on-close="$ctrl.closeEditOverlay()">
</vg-location-edit-overlay>

<vg-card class="vg-location-details__card">
    <div class="modification-banner" ng-if="$ctrl.editMode">
        <div class="row">
            <div class="col-xs-8">
                <h1 class="h4">{{ 'location.edit' | translate }}</h1>
            </div>
            <div class="col-xs-4">
                <button ng-click="$ctrl.toggleEditMode()" class="btn btn-finish">
                    {{ 'location.finish' | translate }}
                </button>
            </div>
        </div>
    </div>

    <div>
        <vg-location-header vg-location="$ctrl.location" ng-if="!$ctrl.editMode"></vg-location-header>
        <vg-location-header-edit vg-location="$ctrl.location" ng-if="$ctrl.editMode"></vg-location-header-edit>

        <div class="vg-location-details__description" ng-class="{ 'is-edit-mode': $ctrl.editMode }">
            <div ng-if="$ctrl.editMode" class="card__right-float">
                <button class="remove-btn" ng-click="$ctrl.startEditTask('SetLocationDescription')">
                    <span class="edit-icon">
                        <vg-icon vg-name="'pen'"></vg-icon>
                    </span>
                </button>
            </div>

            <div class="vg-location-details__description__content"
             ng-if="$ctrl.location.description">{{ $ctrl.location.description }}</div>
            <div ng-if="!$ctrl.location.description">
                <button type="button" class="btn-link-style btn-link-style--add-icon"
                 ng-click="$ctrl.startEditTask('SetLocationDescription')">
                    <vg-icon vg-name="'add'"></vg-icon>
                    {{ 'location.description.add' | translate }}
                </button>
            </div>
        </div>
    </div>
</vg-card>
<vg-card class="vg-location-details__card">
    <vg-location-rating-chick ng-class="{'location-details-card-disabled' : $ctrl.editMode}">
    </vg-location-rating-chick>
</vg-card>
<vg-card class="vg-location-details__card vg-location-details__card--products">
    <h2 class="vg-location-products__title">
        <vg-icon vg-name="'gastronomyProduct'" class="vg-location-products__title-icon"></vg-icon>
        <span class="vg-location-products__title-text">
    {{ 'location.products.title' | translate }}
    </span>
    </h2>
    <vg-location-tags vg-tags="$ctrl.location.getSortedTags()" class="location-tags-card"></vg-location-tags>
    <vg-location-products vg-location="$ctrl.location" vg-limit="1"></vg-location-products>
</vg-card>
<vg-card class="vg-location-details__card vg-location-details__card--tasks" ng-class="{'location-details-card-disabled' : $ctrl.editMode}">
    <h2 class="vg-location-products__title">
        <vg-icon vg-name="'missions'" class="vg-location-products__title-icon vg-location-products__veganize-icon"></vg-icon>
        <span class="vg-location-products__title-text">
    {{ 'location.veganize.title' | translate }}
    </span>
    </h2>
    <vg-location-tasks vg-tasks="$ctrl.tasks" vg-limit="1">
    </vg-location-tasks>
</vg-card>
<vg-card class="vg-location-details__card vg-location-details__card--map">
    <vg-location-map-preview vg-location="$ctrl.location" vg-on-click="$root.goToView('/map/')">
    </vg-location-map-preview>
</vg-card>
<vg-card class="vg-location-details__card">
    <div ng-class="{'location-details-card-disabled' : $ctrl.editMode}">
        <a href="#">
            <vg-icon vg-name="'route'" class="vg-location-details_icon"></vg-icon>
            {{ 'action.openInMapApp' | translate }}
        </a>
    </div>
</vg-card>

<vg-card class="vg-location-details__card" ng-if="$ctrl.location.website || $ctrl.editMode">
    <div class="row">
        <!-- TODO WIP: Find better markup/css solution for edit mode -->
        <div ng-class="($ctrl.editMode ? 'col-xs-10' : 'col-xs-12')">
            <a ng-href="{{ $ctrl.location.website }}" target="_blank" ng-if="$ctrl.location.website">
                <vg-icon vg-name="'home'" class="vg-location-details_icon"></vg-icon>
                {{ $ctrl.location.website }}
            </a>
            <div ng-if="!$ctrl.location.website">
                <vg-icon vg-name="'home'" class="vg-location-details_icon"></vg-icon>
                <em>{{ 'location.website.missing' | translate }}</em>
            </div>
        </div>
        <div class="col-xs-2 pen-aligner" ng-if="$ctrl.editMode">
            <button class="oval-edit-btn" ng-click="$ctrl.startEditTask('SetLocationWebsite')">
                <vg-icon vg-name="'pen'"></vg-icon>
            </button>
        </div>
    </div>
</vg-card>

<!-- TODO WIP Change Mock Data -->
<div class="vg-location-details__footer-wrapper">
    <div class="last-update">
        <vg-icon vg-name="'clock'"></vg-icon>
        <div class="text">Letzte Aktualisierung MOCK</div>
    </div>
    <div class="contributor">
        <vg-icon vg-name="'profile'"></vg-icon>
        <div class="text">Erstellt von <a href="#">Hans Muster</a></div>
    </div>
    <div class="contributors">
        <div>Infos von <a href="#">Hans Muster</a>, <a href="#">Hans Muster</a>, <a href="#">Hans Muster</a></div>
    </div>
</div>

<div class="overlay-modal-bottom vg-location-details__img">
    <img src="img/background/landscape.svg">
</div>
