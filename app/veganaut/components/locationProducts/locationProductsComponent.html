<div class="vg-location-products">
    <div ng-if="vm.parent.editMode" class="card__right-float">
        <button class="remove-btn" ng-click="">
            <span class="edit-icon">
                <vg-icon vg-name="'pen'"></vg-icon>
            </span>
        </button>
    </div>
    <h1 class="vg-location-products__title" ng-if="!vm.isPreview">
        <strong>
            {{ vm.location.getProducts().length > 0 ?
            ('product.' + vm.location.type + '.totalProducts' | translate: {numProducts: vm.location.getProducts().length - vm.limitTo}) :
            ('product.' + vm.location.type + '.noProducts' | translate) }}
        </strong>
    </h1>
    <div ng-if="vm.location.getProducts().length === 0 && vm.parent.editMode"
     class="card__right-float">
        <button class="remove-btn" ng-click="">
            <span class="edit-icon">
                <vg-icon vg-name="'pen'"></vg-icon>
            </span>
        </button>
    </div>
    <ul ng-if="vm.location.getProducts().length > 0" class="vg-location-products__list">
        <li ng-if="!vm.isProductListExpanded" ng-repeat="product in vm.location.getProducts() | limitTo: vm.limit track by product.id"
         class="vg-location-products__list-item vg-location-products--{{ product.availability }}">
            <vg-product-list-item vg-product="product"></vg-product-list-item>
        </li>
        <li ng-if="vm.isProductListExpanded" ng-repeat="product in vm.location.getProducts() track by product.id"
         class="vg-location-products__list-item vg-location-products--{{ product.availability }}">
            <vg-product-list-item vg-product="product"></vg-product-list-item>
        </li>
    </ul>
    <!-- Directly show an add product button if there 0 or 1 products as we never
    show the button int the expanded list in that case -->
    <div ng-if="vm.location.getProducts().length < 2"
     class="vg-location-products__few-products-add-btn">
        <button type="button" class="btn-link-style btn-link-style--add-icon">
            <vg-icon vg-name="'add'"></vg-icon>
            {{ 'product.' + vm.location.type + '.addProduct' | translate }}
        </button>
    </div>
    <div ng-if="vm.isProductListExpanded" class="vg-location-products__add-product">
        <button type="button" class="btn-primary btn-small">
            <vg-icon vg-name="'plus'" class="btn__icon"></vg-icon>
            {{ 'product.' + vm.location.type + '.addProduct' | translate }}
        </button>
    </div>
    <button
     class="vg-location-products__more-products"
     ng-if="vm.location.getProducts().length > vm.limit"
     ng-disabled="vm.isPreview"
     ng-click="vm.onExpandCollapseToggleClick()"
     ng-class="{'vg-location-products__more-products--expanded': vm.isProductListExpanded}">
        <vg-icon class="vg-location-products__more-products-icon"
         vg-name="'chevron-small-down'"
         ng-if="!vm.isPreview">
        </vg-icon>
        <span ng-show="!vm.isProductListExpanded">
            {{ 'product.' + vm.location.type + '.moreProducts' |
            translate:{numProducts: vm.location.getProducts().length - vm.limit} }}
        </span>
        <span ng-show="vm.isProductListExpanded">
            {{ 'product.' + vm.location.type + '.lessProducts' | translate }}
        </span>
    </button>
</div>
